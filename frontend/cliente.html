<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel da Empresa - AgendaAqui Vistorias</title>
  <link rel="stylesheet" href="/src/styles/theme.css">
  <link rel="stylesheet" href="/src/styles/main.css">
  <link rel="stylesheet" href="/src/styles/cliente.css">
</head>
<body class="cliente-body">
  <!-- Login Screen -->
  <div id="loginScreen" class="login-screen">
    <div class="login-box">
      <div class="login-header">
        <h1>AgendaAqui</h1>
        <p>Painel da Empresa</p>
      </div>

      <!-- Step 1: Email -->
      <div id="stepEmail" class="login-step">
        <h2>Acesse sua conta</h2>
        <form id="emailForm">
          <div class="form-group">
            <label for="loginEmail">E-mail</label>
            <input type="email" id="loginEmail" placeholder="seu@email.com" required>
          </div>
          <div id="emailError" class="alert alert-error" style="display: none;"></div>
          <button type="submit" class="btn btn-primary btn-large" style="width: 100%;">
            Continuar
          </button>
        </form>
      </div>

      <!-- Step 2: Create Password (First Access) -->
      <div id="stepCreatePassword" class="login-step" style="display: none;">
        <div class="welcome-message">
          <h2>Bem-vindo(a), <span id="welcomeName"></span>!</h2>
          <p>Este é seu primeiro acesso. Por favor, crie uma senha para sua conta.</p>
          <p class="empresa-info">Empresa: <strong id="welcomeEmpresa"></strong></p>
        </div>
        <form id="createPasswordForm">
          <input type="hidden" id="createEmail">
          <div class="form-group">
            <label for="newPassword">Nova Senha</label>
            <input type="password" id="newPassword" placeholder="Mínimo 6 caracteres" required minlength="6">
          </div>
          <div class="form-group">
            <label for="confirmPassword">Confirmar Senha</label>
            <input type="password" id="confirmPassword" placeholder="Repita a senha" required minlength="6">
          </div>
          <div id="createPasswordError" class="alert alert-error" style="display: none;"></div>
          <button type="submit" class="btn btn-primary btn-large" style="width: 100%;">
            Criar Senha e Entrar
          </button>
          <button type="button" class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="clienteApp.backToEmail()">
            Voltar
          </button>
        </form>
      </div>

      <!-- Step 3: Login with Password -->
      <div id="stepPassword" class="login-step" style="display: none;">
        <h2>Digite sua senha</h2>
        <p class="email-display" id="emailDisplay"></p>
        <form id="passwordForm">
          <input type="hidden" id="passwordEmail">
          <div class="form-group">
            <label for="loginPassword">Senha</label>
            <input type="password" id="loginPassword" placeholder="Sua senha" required>
          </div>
          <div id="passwordError" class="alert alert-error" style="display: none;"></div>
          <button type="submit" class="btn btn-primary btn-large" style="width: 100%;">
            Entrar
          </button>
          <button type="button" class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="clienteApp.backToEmail()">
            Voltar
          </button>
          <div class="forgot-password">
            <a href="#" onclick="clienteApp.forgotPassword()">Esqueci minha senha</a>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="clienteDashboard" style="display: none;">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="empresa-logo" id="empresaLogo">
          <span id="empresaInicial">E</span>
        </div>
        <h2 id="empresaNome">Empresa</h2>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-section="dashboard">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
          <span class="nav-text">Dashboard</span>
        </a>
        <a href="#" class="nav-item" data-section="agendamentos">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span class="nav-text">Agendamentos</span>
          <span class="nav-badge" id="badge-pendentes" style="display: none;">0</span>
        </a>
        <a href="#" class="nav-item" data-section="clientes">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
          <span class="nav-text">Clientes</span>
        </a>
        <a href="#" class="nav-item" data-section="minha-empresa">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span class="nav-text">Minha Empresa</span>
        </a>
        <a href="#" class="nav-item" data-section="configuracoes">
          <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"></path>
          </svg>
          <span class="nav-text">Configuracoes</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          <div class="user-details">
            <div class="user-name" id="userName">Usuario</div>
            <div class="user-role" id="userRole">Administrador</div>
          </div>
        </div>
        <button class="btn-logout" id="logoutBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          <span>Sair</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="content-header">
        <div class="header-left">
          <button class="btn-menu-toggle" id="menuToggle">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
          <h1 id="pageTitle">Dashboard</h1>
        </div>
        <div class="header-right">
          <!-- Theme Toggle -->
          <button class="theme-toggle" aria-label="Alternar tema claro/escuro" title="Alternar tema">
            <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
          <a href="#" id="verMinhaPagina" target="_blank" class="btn btn-secondary btn-small">
            Ver Minha Pagina
          </a>
        </div>
      </header>

      <!-- Dashboard Section -->
      <section id="section-dashboard" class="content-section active">
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon" style="background: #3b82f6;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-value" id="statHoje">0</div>
              <div class="stat-label">Agendamentos Hoje</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: #f59e0b;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-value" id="statPendentes">0</div>
              <div class="stat-label">Pendentes</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: #10b981;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-value" id="statConfirmados">0</div>
              <div class="stat-label">Confirmados</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: #8b5cf6;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
              </svg>
            </div>
            <div class="stat-content">
              <div class="stat-value" id="statFaturamento">R$ 0,00</div>
              <div class="stat-label">Faturamento do Mes</div>
            </div>
          </div>
        </div>

        <!-- Agendamentos de Hoje -->
        <div class="card">
          <div class="card-header">
            <h3>Agendamentos de Hoje</h3>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Horario</th>
                  <th>Cliente</th>
                  <th>Telefone</th>
                  <th>Veiculo</th>
                  <th>Servico</th>
                  <th>Valor</th>
                  <th>Status</th>
                  <th>Acoes</th>
                </tr>
              </thead>
              <tbody id="agendamentosHojeTable">
                <tr>
                  <td colspan="8" style="text-align: center; padding: 40px; color: #666;">
                    Carregando...
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Proximos Agendamentos -->
        <div class="card">
          <div class="card-header">
            <h3>Proximos Agendamentos</h3>
          </div>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Horario</th>
                  <th>Cliente</th>
                  <th>Veiculo</th>
                  <th>Servico</th>
                  <th>Valor</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="proximosAgendamentosTable">
                <tr>
                  <td colspan="7" style="text-align: center; padding: 40px; color: #666;">
                    Carregando...
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Agendamentos Section -->
      <section id="section-agendamentos" class="content-section">
        <div class="section-header">
          <h2>Todos os Agendamentos</h2>
          <div class="filters">
            <select id="filtroStatus" class="form-control">
              <option value="">Todos os Status</option>
              <option value="pendente">Pendente</option>
              <option value="confirmado">Confirmado</option>
              <option value="concluido">Concluido</option>
              <option value="cancelado">Cancelado</option>
            </select>
            <input type="date" id="filtroDataInicio" class="form-control" placeholder="Data Inicio">
            <input type="date" id="filtroDataFim" class="form-control" placeholder="Data Fim">
            <input type="text" id="filtroBusca" class="form-control" placeholder="Buscar cliente/placa...">
            <button class="btn btn-primary" id="btnFiltrar">Filtrar</button>
          </div>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Data</th>
                <th>Horario</th>
                <th>Cliente</th>
                <th>Telefone</th>
                <th>Veiculo</th>
                <th>Servico</th>
                <th>Valor</th>
                <th>Status</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody id="todosAgendamentosTable">
              <tr>
                <td colspan="9" style="text-align: center; padding: 40px; color: #666;">
                  Carregando...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="pagination" id="paginationAgendamentos"></div>
      </section>

      <!-- Clientes Section -->
      <section id="section-clientes" class="content-section">
        <div class="section-header">
          <h2>Meus Clientes</h2>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Email</th>
                <th>Telefone</th>
                <th>CPF</th>
                <th>Total Agendamentos</th>
                <th>Valor Total</th>
                <th>Ultimo Agendamento</th>
              </tr>
            </thead>
            <tbody id="clientesTable">
              <tr>
                <td colspan="7" style="text-align: center; padding: 40px; color: #666;">
                  Carregando...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Minha Empresa Section -->
      <section id="section-minha-empresa" class="content-section">
        <div class="section-header">
          <h2>Dados da Minha Empresa</h2>
        </div>
        <form id="empresaForm" class="empresa-form">
          <div class="form-grid">
            <div class="form-section">
              <h3>Informacoes Basicas</h3>
              <div class="form-group">
                <label>Nome da Empresa</label>
                <input type="text" id="empNome" disabled class="form-control">
                <small>Para alterar o nome, entre em contato com o suporte.</small>
              </div>
              <div class="form-group">
                <label>Slug (URL)</label>
                <input type="text" id="empSlug" disabled class="form-control">
                <small>agendaaquivistorias.com.br/<span id="empSlugPreview"></span></small>
              </div>
              <div class="form-group">
                <label>Email Principal</label>
                <input type="email" id="empEmail" disabled class="form-control">
              </div>
              <div class="form-group">
                <label for="empTelefone">Telefone</label>
                <input type="tel" id="empTelefone" class="form-control" placeholder="(11) 99999-9999">
              </div>
              <div class="form-group">
                <label for="empWhatsapp">WhatsApp</label>
                <input type="tel" id="empWhatsapp" class="form-control" placeholder="(11) 99999-9999">
              </div>
              <div class="form-group">
                <label for="empDescricao">Descricao</label>
                <textarea id="empDescricao" class="form-control" rows="3" placeholder="Descreva sua empresa..."></textarea>
              </div>
            </div>

            <div class="form-section">
              <h3>Endereco</h3>
              <div class="form-row">
                <div class="form-group" style="flex: 1;">
                  <label for="empCep">CEP</label>
                  <input type="text" id="empCep" class="form-control" placeholder="00000-000">
                </div>
                <button type="button" class="btn btn-secondary" id="btnBuscarCep" style="align-self: flex-end;">Buscar</button>
              </div>
              <div class="form-group">
                <label for="empEndereco">Endereco</label>
                <input type="text" id="empEndereco" class="form-control" placeholder="Rua, Avenida...">
              </div>
              <div class="form-row">
                <div class="form-group" style="flex: 1;">
                  <label for="empNumero">Numero</label>
                  <input type="text" id="empNumero" class="form-control" placeholder="123">
                </div>
                <div class="form-group" style="flex: 2;">
                  <label for="empComplemento">Complemento</label>
                  <input type="text" id="empComplemento" class="form-control" placeholder="Sala, Bloco...">
                </div>
              </div>
              <div class="form-group">
                <label for="empBairro">Bairro</label>
                <input type="text" id="empBairro" class="form-control" placeholder="Bairro">
              </div>
              <div class="form-row">
                <div class="form-group" style="flex: 2;">
                  <label for="empCidade">Cidade</label>
                  <input type="text" id="empCidade" class="form-control" placeholder="Cidade">
                </div>
                <div class="form-group" style="flex: 1;">
                  <label for="empEstado">Estado</label>
                  <select id="empEstado" class="form-control">
                    <option value="">UF</option>
                    <option value="AC">AC</option>
                    <option value="AL">AL</option>
                    <option value="AP">AP</option>
                    <option value="AM">AM</option>
                    <option value="BA">BA</option>
                    <option value="CE">CE</option>
                    <option value="DF">DF</option>
                    <option value="ES">ES</option>
                    <option value="GO">GO</option>
                    <option value="MA">MA</option>
                    <option value="MT">MT</option>
                    <option value="MS">MS</option>
                    <option value="MG">MG</option>
                    <option value="PA">PA</option>
                    <option value="PB">PB</option>
                    <option value="PR">PR</option>
                    <option value="PE">PE</option>
                    <option value="PI">PI</option>
                    <option value="RJ">RJ</option>
                    <option value="RN">RN</option>
                    <option value="RS">RS</option>
                    <option value="RO">RO</option>
                    <option value="RR">RR</option>
                    <option value="SC">SC</option>
                    <option value="SP">SP</option>
                    <option value="SE">SE</option>
                    <option value="TO">TO</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Horario de Funcionamento</h3>
              <div class="form-group">
                <label for="empHorario">Horario</label>
                <input type="text" id="empHorario" class="form-control" placeholder="Seg a Sex: 08h - 18h">
              </div>
            </div>

            <div class="form-section">
              <h3>Personalizacao</h3>
              <div class="form-row">
                <div class="form-group">
                  <label for="empCorPrimaria">Cor Primaria</label>
                  <input type="color" id="empCorPrimaria" class="form-control-color" value="#3b82f6">
                </div>
                <div class="form-group">
                  <label for="empCorSecundaria">Cor Secundaria</label>
                  <input type="color" id="empCorSecundaria" class="form-control-color" value="#1e40af">
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Redes Sociais</h3>
              <div class="form-group">
                <label for="empFacebook">Facebook</label>
                <input type="url" id="empFacebook" class="form-control" placeholder="https://facebook.com/...">
              </div>
              <div class="form-group">
                <label for="empInstagram">Instagram</label>
                <input type="url" id="empInstagram" class="form-control" placeholder="https://instagram.com/...">
              </div>
              <div class="form-group">
                <label for="empSite">Site</label>
                <input type="url" id="empSite" class="form-control" placeholder="https://...">
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-large">Salvar Alteracoes</button>
          </div>
        </form>
      </section>

      <!-- Configuracoes Section -->
      <section id="section-configuracoes" class="content-section">
        <div class="section-header">
          <h2>Configuracoes</h2>
        </div>

        <div class="config-grid">
          <!-- Horarios -->
          <div class="card config-card">
            <div class="card-header">
              <h3>Horarios de Atendimento</h3>
            </div>
            <div class="card-body">
              <div class="form-row">
                <div class="form-group">
                  <label for="configHorarioInicio">Inicio</label>
                  <input type="time" id="configHorarioInicio" class="form-control" value="08:00">
                </div>
                <div class="form-group">
                  <label for="configHorarioFim">Fim</label>
                  <input type="time" id="configHorarioFim" class="form-control" value="18:00">
                </div>
              </div>
              <div class="form-group">
                <label for="configIntervalo">Intervalo entre Agendamentos (minutos)</label>
                <select id="configIntervalo" class="form-control">
                  <option value="30">30 minutos</option>
                  <option value="45">45 minutos</option>
                  <option value="60">1 hora</option>
                  <option value="90">1h30</option>
                </select>
              </div>
              <button class="btn btn-primary" id="btnSalvarHorarios">Salvar Horarios</button>
            </div>
          </div>

          <!-- Alterar Senha -->
          <div class="card config-card">
            <div class="card-header">
              <h3>Alterar Senha</h3>
            </div>
            <div class="card-body">
              <div class="form-group">
                <label for="senhaAtual">Senha Atual</label>
                <input type="password" id="senhaAtual" class="form-control" placeholder="Digite sua senha atual">
              </div>
              <div class="form-group">
                <label for="novaSenha">Nova Senha</label>
                <input type="password" id="novaSenha" class="form-control" placeholder="Minimo 6 caracteres">
              </div>
              <div class="form-group">
                <label for="confirmarNovaSenha">Confirmar Nova Senha</label>
                <input type="password" id="confirmarNovaSenha" class="form-control" placeholder="Repita a nova senha">
              </div>
              <button class="btn btn-primary" id="btnAlterarSenha">Alterar Senha</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal de Detalhes do Agendamento -->
  <div id="agendamentoModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeAgendamentoModal">&times;</span>
      <div id="agendamentoDetails"></div>
    </div>
  </div>

  <script type="module" src="/src/cliente.js"></script>
</body>
</html>
