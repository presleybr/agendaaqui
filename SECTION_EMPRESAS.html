<!-- ADICIONAR ESTA SE√á√ÉO NO ADMIN.HTML AP√ìS A SE√á√ÉO DE CONFIGURA√á√ïES -->

<!-- Se√ß√£o Empresas (SaaS Multi-Tenant) -->
<section id="section-empresas" class="content-section">
  <div class="section-header">
    <h2>üè¢ Empresas Clientes</h2>
    <button class="btn btn-primary" id="btnNovaEmpresa">+ Nova Empresa</button>
  </div>

  <!-- Resumo -->
  <div class="stats-grid" style="margin-bottom: 30px;">
    <div class="stat-card">
      <div class="stat-label">Total de Empresas</div>
      <div class="stat-value" id="statTotalEmpresas">-</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Empresas Ativas</div>
      <div class="stat-value" id="statEmpresasAtivas">-</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Receita do M√™s</div>
      <div class="stat-value" id="statReceitaMes">-</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Comiss√µes Pendentes</div>
      <div class="stat-value" id="statComissoesPendentes">-</div>
    </div>
  </div>

  <!-- Tabela de Empresas -->
  <div class="table-container">
    <table class="admin-table">
      <thead>
        <tr>
          <th>Empresa / Subdom√≠nio</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Chave PIX</th>
          <th>Comiss√£o</th>
          <th>Status</th>
          <th>M√©tricas</th>
          <th style="min-width: 150px;">A√ß√µes</th>
        </tr>
      </thead>
      <tbody id="empresasTableBody">
        <tr>
          <td colspan="8" style="text-align: center; padding: 40px;">
            <div class="spinner"></div>
            <p style="margin-top: 10px; color: #666;">Carregando empresas...</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- Modal Nova/Editar Empresa -->
<div id="modalEmpresa" class="modal" style="display: none;">
  <div class="modal-content" style="max-width: 800px;">
    <span class="close" id="fecharModalEmpresa">&times;</span>
    <h2 id="modalEmpresaTitle" style="margin-bottom: 30px; color: var(--brand-primary);">Nova Empresa</h2>

    <form id="formEmpresa">
      <!-- Dados B√°sicos -->
      <div class="detail-section">
        <h3>üìã Dados B√°sicos</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="empresaNome">Nome da Empresa *</label>
            <input type="text" id="empresaNome" required placeholder="Ex: Vistoria Express SP">
          </div>
          <div class="form-group">
            <label for="empresaSlug">Subdom√≠nio *</label>
            <input type="text" id="empresaSlug" required placeholder="Ex: vistoria-sp">
            <small style="color: #666;">
              Ser√°: <strong><span id="previewSlug">...</span>.agendaaquivistorias.com.br</strong>
            </small>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="empresaEmail">Email *</label>
            <input type="email" id="empresaEmail" required placeholder="contato@empresa.com">
          </div>
          <div class="form-group">
            <label for="empresaTelefone">Telefone</label>
            <input type="tel" id="empresaTelefone" placeholder="(67) 99999-9999">
          </div>
        </div>

        <div class="form-group">
          <label for="empresaCNPJ">CNPJ (opcional)</label>
          <input type="text" id="empresaCNPJ" placeholder="00.000.000/0000-00">
        </div>
      </div>

      <!-- Pagamento -->
      <div class="detail-section">
        <h3>üí∞ Configura√ß√µes de Pagamento</h3>
        <div class="form-group">
          <label for="empresaChavePix">Chave PIX (para receber repasses) *</label>
          <input type="text" id="empresaChavePix" required placeholder="email@empresa.com, telefone ou chave aleat√≥ria">
          <small style="color: #666;">
            ‚ö†Ô∏è Os repasses ser√£o enviados para esta chave PIX ap√≥s os primeiros 30 dias.
          </small>
        </div>

        <div class="alert alert-info" style="margin-top: 15px;">
          <strong>‚ÑπÔ∏è Regra de Comiss√£o:</strong><br>
          ‚Ä¢ Primeiros 30 dias: <strong>R$ 5,00 fixo</strong> para a plataforma por transa√ß√£o<br>
          ‚Ä¢ Ap√≥s 30 dias: <strong>0% de comiss√£o</strong> (todo valor vai para o cliente)
        </div>
      </div>

      <!-- Pre√ßos e Hor√°rios -->
      <div class="detail-section">
        <h3>‚öôÔ∏è Configura√ß√µes do Neg√≥cio</h3>

        <h4 style="margin-top: 20px;">Pre√ßos (em Reais)</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="empresaPrecoCautelar">Vistoria Cautelar</label>
            <input type="number" id="empresaPrecoCautelar" step="0.01" min="0" value="150.00" placeholder="150.00">
          </div>
          <div class="form-group">
            <label for="empresaPrecoTransferencia">Vistoria Transfer√™ncia</label>
            <input type="number" id="empresaPrecoTransferencia" step="0.01" min="0" value="120.00" placeholder="120.00">
          </div>
          <div class="form-group">
            <label for="empresaPrecoOutros">Outros Servi√ßos</label>
            <input type="number" id="empresaPrecoOutros" step="0.01" min="0" value="100.00" placeholder="100.00">
          </div>
        </div>

        <h4 style="margin-top: 20px;">Hor√°rio de Funcionamento</h4>
        <div class="form-row">
          <div class="form-group">
            <label for="empresaHorarioInicio">Abertura</label>
            <input type="time" id="empresaHorarioInicio" value="08:00">
          </div>
          <div class="form-group">
            <label for="empresaHorarioFim">Fechamento</label>
            <input type="time" id="empresaHorarioFim" value="18:00">
          </div>
        </div>
      </div>

      <!-- Status e Plano -->
      <div class="detail-section">
        <h3>üìä Status e Plano</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="empresaStatus">Status</label>
            <select id="empresaStatus">
              <option value="ativo">Ativo</option>
              <option value="trial">Trial (Teste)</option>
              <option value="inativo">Inativo</option>
              <option value="suspenso">Suspenso</option>
            </select>
          </div>
          <div class="form-group">
            <label for="empresaPlano">Plano</label>
            <select id="empresaPlano">
              <option value="basico">B√°sico</option>
              <option value="premium">Premium</option>
              <option value="enterprise">Enterprise</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Bot√µes -->
      <div class="form-actions" style="margin-top: 30px;">
        <button type="button" class="btn btn-secondary" id="cancelarEmpresa">Cancelar</button>
        <button type="button" class="btn btn-primary btn-large" id="salvarEmpresa">Salvar Empresa</button>
      </div>
    </form>
  </div>
</div>

<!-- ADICIONAR NO MENU LATERAL (dentro do .sidebar-nav): -->
<!--
<a href="#" class="nav-item" data-section="empresas">
  <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
    <line x1="8" y1="21" x2="16" y2="21"></line>
    <line x1="12" y1="17" x2="12" y2="21"></line>
  </svg>
  <span class="nav-text">Empresas</span>
  <span class="nav-badge" id="badge-empresas" style="display: none;">0</span>
</a>
-->

<!-- ADICIONAR NO FINAL DO ADMIN.HTML, ANTES DO </body>: -->
<!--
<script type="module">
  import { EmpresasManager } from '/src/components/EmpresasManager.js';
  window.empresasManager = new EmpresasManager();

  // Preview do slug
  document.getElementById('empresaSlug')?.addEventListener('input', (e) => {
    document.getElementById('previewSlug').textContent = e.target.value || '...';
  });

  // Cancelar modal
  document.getElementById('cancelarEmpresa')?.addEventListener('click', () => {
    document.getElementById('modalEmpresa').style.display = 'none';
  });
</script>
-->
